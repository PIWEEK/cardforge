(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const c of t)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(t){const c={};return t.integrity&&(c.integrity=t.integrity),t.referrerPolicy&&(c.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?c.credentials="include":t.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(t){if(t.ep)return;t.ep=!0;const c=n(t);fetch(t.href,c)}})();function f(e){parent.postMessage(e,"*")}function L(){window.addEventListener("message",e=>{console.log("received:"),console.log(e),e.data.type=="ERROR_DECK_CREATE_PAGE_NOT_EMPTY"?E(!0):e.data.type=="CARDS_DATA"&&x(e.data.data)})}const g=document.querySelectorAll(".tab-selector"),C=document.querySelectorAll(".tab");function y(e){var d,n;for(const a of g)a.classList.remove("current");(d=document.getElementById("ts-"+e))==null||d.classList.add("current");for(const a of C)a.classList.add("hidden");(n=document.getElementById("tab-"+e))==null||n.classList.remove("hidden")}function b(){for(const e of g)e.addEventListener("click",()=>{y(e.dataset.tab)});y("cards")}function B(e){var t,c,o;e.preventDefault();let d=(t=document.getElementById("create-deck-name"))==null?void 0:t.value,n=(c=document.getElementById("create-deck-size"))==null?void 0:c.value,a=(o=document.getElementById("create-deck-orientation"))==null?void 0:o.value;f({type:"create-deck",name:d,size:n,orientation:a,data:null})}function E(e){var d,n,a,t;e?((d=document.getElementById("box-create-error"))==null||d.classList.remove("hidden"),(n=document.getElementById("box-create"))==null||n.classList.add("hidden")):((a=document.getElementById("box-create-error"))==null||a.classList.add("hidden"),(t=document.getElementById("box-create"))==null||t.classList.remove("hidden"))}function I(){var e,d;(e=document.getElementById("create-deck-frm"))==null||e.addEventListener("submit",B),(d=document.getElementById("box-create-error-close"))==null||d.addEventListener("click",()=>{E(!1)})}const l=document.getElementById("card-list");let i=[],r=[];function h(){f({type:"save-cards-data",data:JSON.stringify(r)})}function x(e){e&&(r=JSON.parse(e),p())}function v(e,d){let n=document.createElement("div");n.classList.add("card-entry"),n.id="card-entry-"+e;let a=document.createElement("div");a.classList.add("card-actions");let t=document.createElement("div");t.classList.add("card-action-copy"),t.addEventListener("click",()=>{O(e)}),a.appendChild(t);let c=document.createElement("div");c.classList.add("card-action-delete"),c.addEventListener("click",()=>{A(e)}),a.appendChild(c);let o=document.createElement("div");o.classList.add("card-num"),o.innerText=String(e).padStart(2,"0"),n.appendChild(o);for(let m=0;m<i.length;m++)if(i[m].type=="text"){let s=document.createElement("div");s.classList.add("card-text");let u=document.createElement("input");d.hasOwnProperty(i[m].name)&&(u.value=d[i[m].name]),u.addEventListener("blur",()=>{D(e,i[m].name,u.value)}),s.appendChild(u),n.appendChild(s)}else{let s=document.createElement("div");s.classList.add("card-image");let u=document.createElement("img");u.src="images/add_image.png",s.appendChild(u),n.appendChild(s)}return n.appendChild(a),n}function S(){let e={};console.log(r),r.push(e);let d=v(r.length,e);l==null||l.appendChild(d),h(),l.scrollTop=l==null?void 0:l.scrollHeight}function A(e){r.splice(e-1,1),p()}function O(e){let d=structuredClone(r[e-1]);r.splice(e-1,0,d),p()}function D(e,d,n){r[e-1][d]=n,h()}function T(){i=[{name:"Nombre",type:"text"},{name:"Fuerza",type:"text"}];const e=document.getElementById("cards-header"),d=document.getElementById("cards-header-actions");console.log("cardHeader",e),console.log("cardsHeaderActions",d),document.querySelectorAll(".card-header").forEach(n=>n.remove());for(let n=0;n<i.length;n++){let a=i[n];console.log(a);let t=document.createElement("div");t.classList.add("card-header"),a.type=="image"?t.classList.add("card-img"):t.classList.add("card-text"),t.innerText=a.name,e==null||e.insertBefore(t,d)}}function p(){document.querySelectorAll(".card-entry").forEach(e=>e.remove());for(let e=0;e<r.length;e++){let d=v(e+1,r[e]);l==null||l.appendChild(d)}}function k(){var e;T(),f({type:"load-cards-data",data:""}),(e=document.getElementById("add-card"))==null||e.addEventListener("click",()=>{S()})}window.onload=e=>{L(),b(),I(),k(),console.log("page is fully loaded")};
